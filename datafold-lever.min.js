var Webflow=Webflow||[];Webflow.push(function(){$(document).off("submit")}),function(){const e="https://proxy.cloverlabs.dev/lever";var t={method:"GET",redirect:"follow"};const n=document.getElementById("open-positions-container"),o=document.getElementById("positions-loading"),i=document.getElementById("positions-error"),s=document.getElementById("position-back"),l=document.getElementById("position-loading"),a=document.getElementById("position-error"),d=document.getElementById("position-data");s.addEventListener("click",function(e){history.pushState("",document.title,window.location.pathname+window.location.search),window.scrollTo(0,0),document.getElementsByClassName("career")[0].style.display="block",document.getElementsByClassName("open-positions-section")[0].style.display="block",document.getElementById("single-position").style.display="none"});const c=function(e){return function(t){if(window.scrollTo(0,0),document.getElementById("form-jobID").value=e.id,document.getElementsByClassName("career")[0].style.display="none",document.getElementsByClassName("open-positions-section")[0].style.display="none",document.getElementById("position-heading").innerText=e.text,e.categories.team&&(e.categories.location||e.categories.commitment)?document.getElementById("position-dash").style.display="block":document.getElementById("position-dash").style.display="none",e.categories.team?document.getElementById("position-team").innerText=e.categories.team:document.getElementById("position-team").innerText="",e.categories.location&&e.categories.commitment?document.getElementById("position-location").innerText=e.categories.location+" / "+e.categories.commitment:(e.categories.location&&(document.getElementById("position-location").innerText=e.categories.location),e.categories.commitment&&(document.getElementById("position-location").innerText=e.categories.commitment)),document.getElementById("position-desc").innerHTML=e.content.descriptionHtml,e.content.lists){let t=e.content.lists;for(let e=0;e<t.length;e++)document.getElementById("position-desc").innerHTML+="<h3><strong>"+t[e].text+"</strong></h3>",document.getElementById("position-desc").innerHTML+="<ul>"+t[e].content+"</ul>"}document.getElementById("single-position").style.display="block"}};if(async function(){i.style.display="none",o.style.display="flex";const n=await fetch(`${e}/postings`,t),s=await n.json();return o.style.display="none",s}().then(e=>{let t=e.data,o={};for(let e=0;e<t.length;e++)if("published"==t[e].state){let n="";n=t[e].hasOwnProperty("categories")&&t[e].categories.hasOwnProperty("team")&&t[e].categories.team?t[e].categories.team.toLowerCase().replace(" ","-"):"uncategorized",o.hasOwnProperty(n)||(o[n]=[]),o[n].push(t[e])}let i=Object.keys(o).sort().reduce(function(e,t){return e[t]=o[t],e},{}),s=document.createDocumentFragment();for(var l of Object.keys(i)){let e=document.createElement("h2");e.className="heading-22",e.innerText="";let t=document.createElement("div");t.className="w-layout-grid open-positions";for(let n=0;n<i[l].length;n++){""==e.innerText&&(i[l][n].categories.team?e.innerText=i[l][n].categories.team:e.innerText="Uncategorized");let o=document.createElement("div");o.className="position-card";let s=document.createElement("div");s.className="position-card-content";let a=document.createElement("h3");a.className="heading-13",a.innerText=i[l][n].text;let d=document.createElement("div");d.className="text-block",i[l][n].categories.location&&i[l][n].categories.commitment&&(d.innerText=i[l][n].categories.location+" / "+i[l][n].categories.commitment),s.append(a,d);let m=document.createElement("div");m.className="position-card-button";let r=document.createElement("a");r.className="button button-primary w-button",r.innerText="Learn More",r.href="#"+i[l][n].id,r.addEventListener("click",c(i[l][n])),m.appendChild(r),o.append(s,m),t.appendChild(o)}s.append(e,t)}n.appendChild(s)}).catch(e=>{console.log("error",e),i.style.display="block"}),""!=window.location.hash){d.style.display="none",document.getElementsByClassName("career")[0].style.display="none",document.getElementsByClassName("open-positions-section")[0].style.display="none",document.getElementById("single-position").style.display="block",async function(n){a.style.display="none",l.style.display="flex";const o=await fetch(`${e}/postings/${n}`,t),i=await o.json();return l.style.display="none",i}(window.location.hash.replace("#","")).then(e=>{let t=e.data;if(document.getElementById("form-jobID").value=t.id,document.getElementById("position-heading").innerText=t.text,t.categories.team&&(t.categories.location||t.commitment)?document.getElementById("position-dash").style.display="block":document.getElementById("position-dash").style.display="none",t.categories.team&&(document.getElementById("position-team").innerText=t.categories.team),t.categories.location&&t.categories.commitment?document.getElementById("position-location").innerText=t.categories.location+" / "+t.categories.commitment:(t.categories.location&&(document.getElementById("position-location").innerText=t.categories.location),t.categories.commitment&&(document.getElementById("position-location").innerText=t.categories.commitment)),document.getElementById("position-desc").innerHTML=t.content.descriptionHtml,t.content.lists){let e=t.content.lists;for(let t=0;t<e.length;t++)document.getElementById("position-desc").innerHTML+="<h3><strong>"+e[t].text+"</strong></h3>",document.getElementById("position-desc").innerHTML+="<ul>"+e[t].content+"</ul>"}d.style.display="block"}).catch(e=>{console.log("error",e),a.style.display="block"})}$("#application-form").find(":input").on("invalid",function(e){let t=$(this);this.nextSibling.classList.remove("hidden"),this.classList.add("field-input-error");let n=$("#application-form").find(":invalid").first();if(t[0]===n[0]){let e=$("nav.navbar").height()+38,n=t.offset().top-e,o=window.pageYOffset-e;if(n>o&&n<o+window.innerHeight)return!0;$("html,body").animate({scrollTop:n},"slow")}});const m=document.getElementById("application-form"),r=document.getElementById("application-form-success"),u=document.getElementById("application-form-error"),p=document.getElementById("fullName"),g=document.getElementById("email-app");function y(e){""===e.value?(e.classList.add("field-input-error"),e.nextSibling.classList.remove("hidden")):(e.classList.remove("field-input-error"),e.nextSibling.classList.add("hidden"))}m.addEventListener("submit",function(t){t.preventDefault(),I.classList.contains("hidden")||I.classList.add("hidden"),u.style.display="none";let n=document.getElementById("submit-app-btn"),o=n.value,i=n.getAttribute("data-wait");const s=new FormData(t.target);let l=Object.fromEntries(s);delete l["resume-field"],delete l["form-jobID"],""!==l.fullName&&""!==l.email?(n.value=i,n.classList.add("loading"),async function(t){let n=document.getElementById("form-jobID").value,o=[],i=[];for(const e in t)"LinkedIn"===e||"Twitter"===e||"GitHub"===e||"Portfolio"===e||"Other"===e?""!==t[e]&&i.push({name:e,value:t[e]}):""!==t[e]&&o.push({name:e,value:t[e]});let s={personalInformation:o,source:"Datafold website"};i.length>0&&(s.urls=i);let l={method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"},redirect:"follow"};return await fetch(`${e}/postings/${n}/apply`,l)}(l).then(e=>{if(e.ok)return e.json();throw new Error("Error")}).then(e=>{m.classList.add("hidden"),r.style.display="block",document.getElementById("job-app-section").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}).catch(e=>{console.log(e),n.value=o,n.classList.remove("loading"),u.style.display="block"})):(n.value=o,n.classList.remove("loading"),u.style.display="block",""===l.fullName&&(p.classList.add("field-input-error"),p.nextSibling.classList.remove("hidden")),""===l.email&&(g.classList.add("field-input-error"),g.nextSibling.classList.remove("hidden")))}),p.addEventListener("change",function(e){y(this)}),g.addEventListener("change",function(e){y(this)});const h=document.getElementById("resume-field"),f=document.getElementById("file-upload-oversize"),E=document.getElementById("file-upload-type"),I=document.getElementById("file-upload-fail"),B=document.getElementById("file-upload-success"),v=document.getElementById("file-upload-working"),b=document.getElementById("file-upload-filename"),L=document.getElementById("field-label-default"),w=document.getElementById("resume");h.addEventListener("change",function(t){let n=h.files;if(console.log("change event"),n.length){let t=n[0];f.classList.contains("hidden")||f.classList.add("hidden"),I.classList.contains("hidden")||I.classList.add("hidden"),E.classList.contains("hidden")||E.classList.add("hidden"),B.classList.contains("hidden")||B.classList.add("hidden"),v.classList.contains("hidden")||v.classList.add("hidden"),L.classList.contains("hidden")&&L.classList.remove("hidden"),b.innerText="";let o=(t.size/1024/1024).toFixed(4);if(console.log("File size: "+o+" MB"),console.log("File type: "+t.type),!0!=("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t.type||"application/pdf"===t.type||"application/msword"===t.type))console.log("Incorect file type"),E.classList.remove("hidden"),h.value=null,w.value="";else if(o>10)console.log("File too big"),f.classList.remove("hidden"),h.value=null,w.value="";else{console.log("All good"),v.classList.remove("hidden");const n=new FormData;n.append("file",t),fetch(`${e}/uploads`,{method:"POST",body:n,redirect:"follow"}).then(e=>{if(e.ok)return e.json();throw new Error(e.statusText)}).then(e=>{console.log(e),v.classList.add("hidden"),e.data.hasOwnProperty("uri")&&(B.classList.remove("hidden"),L.classList.add("hidden"),b.innerText=e.data.filename,w.value=e.data.uri)}).catch(e=>{console.log("Upload Error: "+e),v.classList.add("hidden"),I.classList.remove("hidden"),h.value=null,w.value=""})}}},!1)}();